<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            touch-action: none;
        }
        #controls {
            position: fixed;
            bottom: 20px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            box-sizing: border-box;
        }
        .touch-btn {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.5);
            border: 2px solid white;
            touch-action: manipulation;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <div id="controls">
        <div>
            <button class="touch-btn" id="leftBtn">←</button>
            <button class="touch-btn" id="rightBtn">→</button>
        </div>
        <button class="touch-btn" id="jumpBtn">↑</button>
    </div>

<script>
const canvas = document.getElementById('gameCanvas');
const context = canvas.getContext('2d');

// Set canvas size to window size
function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    platform.y = canvas.height - 100;
    platform.width = canvas.width;
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

// Touch controls
const leftBtn = document.getElementById('leftBtn');
const rightBtn = document.getElementById('rightBtn');
const jumpBtn = document.getElementById('jumpBtn');

leftBtn.addEventListener('touchstart', (e) => {
    e.preventDefault();
    player.dx = -5;
});
leftBtn.addEventListener('touchend', (e) => {
    e.preventDefault();
    player.dx = 0;
});

rightBtn.addEventListener('touchstart', (e) => {
    e.preventDefault();
    player.dx = 5;
});
rightBtn.addEventListener('touchend', (e) => {
    e.preventDefault();
    player.dx = 0;
});

jumpBtn.addEventListener('touchstart', (e) => {
    e.preventDefault();
    if (!player.jumping) {
        player.dy = -player.jumpForce;
        player.jumping = true;
    }
});

// Rest of your original code with minor adjustments
let backgroundImage = new Image();
backgroundImage.src = 'Background.png';

let gameOver = false;
let gameOverImage = new Image();
gameOverImage.src = 'GameOver.png';

let lifeImage = new Image();
lifeImage.src = 'Live.png';

let player = {
    x: 50,
    y: 400,
    width: 100,
    height: 100,
    dx: 0,
    dy: 0,
    gravity: 0.5,
    jumpForce: 10,
    jumping: false,
    sprite: new Image(),
    lives: 3,
};

let enemy = {
    x: 300,
    y: 400,
    width: 50,
    height: 50,
    dx: -2,
    dy: 0,
    gravity: 0.5,
    jumpForce: 10,
    jumping: false,
    sprite: new Image(),
    rotation: 0,
    dead: false,
};

enemy.sprite.src = "Enemy.png";
player.sprite.src = "Player.png";

let platform = {
    x: 0,
    y: canvas.height - 100,
    width: canvas.width,
    height: 50,
    color: '#0c0'
};

function draw() {
    context.clearRect(0, 0, canvas.width, canvas.height);

    if (gameOver) {
        context.drawImage(gameOverImage, 0, 0, canvas.width, canvas.height);
    } else {
        context.drawImage(backgroundImage, 0, 0, canvas.width, canvas.height);
        for (let i = 0; i < player.lives; i++) {
            context.drawImage(lifeImage, 10 + i * 30, 10, 20, 20);
        }
        context.drawImage(player.sprite, player.x, player.y, player.width, player.height);

        context.save();
        context.translate(enemy.x + enemy.width/2, enemy.y + enemy.height/2);
        context.rotate(enemy.rotation);
        if (!enemy.dead) {
            context.drawImage(enemy.sprite, -enemy.width/2, -enemy.height/2, enemy.width, enemy.height);
        }
        context.restore();
    }
}

function update() {
    if (gameOver) return;

    player.x += player.dx;
    player.y += player.dy;

    // Collision detection and game logic
    if (!enemy.dead && checkCollision(player, enemy)) {
        player.lives--;
        player.x = 500;
        player.y = 100;
        if (player.lives < 0) gameOver = true;
    }

    if (player.y + player.height > platform.y) {
        player.y = platform.y - player.height;
        player.jumping = false;
    } else {
        player.dy += player.gravity;
    }

    // Keep player in bounds
    player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
    player.y = Math.max(0, Math.min(canvas.height - player.height, player.y));

    // Enemy movement
    enemy.x += enemy.dx;
    if (enemy.x <= 0 || enemy.x + enemy.width >= canvas.width) {
        enemy.dx *= -1;
        enemy.rotation += Math.PI;
    }

    draw();
    requestAnimationFrame(update);
}

function checkCollision(rect1, rect2) {
    return rect1.x < rect2.x + rect2.width &&
           rect1.x + rect1.width > rect2.x &&
           rect1.y < rect2.y + rect2.height &&
           rect1.y + rect1.height > rect2.y;
}

// Start the game
update();
</script>
</body>
</html>
